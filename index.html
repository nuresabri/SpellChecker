<script>
  let dictionary = [];

  // Load dictionary on page load
  fetch("dictionary.json")
    .then(response => response.json())
    .then(data => {
      dictionary = data;
    })
    .catch(error => console.error("Failed to load dictionary:", error));

  function computePenalty(word1, word2) {
    const n = word1.length;
    const m = word2.length;
    const dp = Array.from({ length: n + 1 }, () => Array(m + 1).fill(0));

    for (let i = 1; i <= n; i++) dp[i][0] = i * 2;
    for (let j = 1; j <= m; j++) dp[0][j] = j * 2;

    for (let i = 1; i <= n; i++) {
      for (let j = 1; j <= m; j++) {
        if (word1[i - 1] === word2[j - 1]) {
          dp[i][j] = dp[i - 1][j - 1];
        } else {
          const mismatchPenalty =
            "aeiou".includes(word1[i - 1]) === "aeiou".includes(word2[j - 1])
              ? 1
              : 3;
          dp[i][j] = Math.min(
            dp[i - 1][j - 1] + mismatchPenalty,
            dp[i - 1][j] + 2,
            dp[i][j - 1] + 2
          );
        }
      }
    }
    return dp[n][m];
  }

  function getSuggestions() {
    const inputWord = document.getElementById("wordInput").value.trim();
    const suggestionsContainer = document.getElementById("suggestions");

    if (!inputWord) {
      suggestionsContainer.style.display = "none";
      return;
    }

    const suggestions = dictionary
      .map(word => ({
        word,
        score: computePenalty(inputWord.toLowerCase(), word)
      }))
      .sort((a, b) => a.score - b.score)
      .slice(0, 10);

    suggestionsContainer.innerHTML = suggestions
      .map(suggestion => `<p>${suggestion.word} (Score: ${suggestion.score})</p>`)
      .join("");
    suggestionsContainer.style.display = "block";
  }
</script>

